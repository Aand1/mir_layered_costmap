<!-- -->
<launch>  
  <param name="use_sim_time" value="true" />

  <node name="map_server" pkg="mirMapServer" type="map_server" args="$(find sim_dynamic_world)/world/empty_100.yaml">
    <param name="use_db" value="false"/>
  </node>

  <node pkg="stage" type="mir_stageros" name="stage_ros" args="-m $(find sim_dynamic_world)/world/sim_activity_layer.world"/> 

  <node pkg="tf" type="static_transform_publisher" name="initial_pose_link_broadcaster" args="0. 0. 0 0 0 0 /map /robot_0/odom 20" /> 

  <group ns="robot_0" >
    <node name="costmap" pkg="layered_costmap_2d" type="costmap_2d_node" output="screen">
      <rosparam file="$(find sim_dynamic_world)/launch/sim_activity_layer.yaml" command="load" ns="costmap"/> 
    </node>
  </group>
  <!-- Fast dynamic obstacle -->
  <node name="robot_1" pkg="sim_dynamic_world" type="dynamic_obsacle_control" output="screen">
    <rosparam file="$(find sim_dynamic_world)/launch/fast_dynamic_obstacle.yaml" command="load"/> 
  </node>
  <!-- Slow dynamic obstacle -->
  <node name="robot_2" pkg="sim_dynamic_world" type="dynamic_obsacle_control" output="screen">
    <rosparam file="$(find sim_dynamic_world)/launch/slow_dynamic_obstacle.yaml" command="load"/> 
  </node>
  <node name="occupancy_publisher" pkg="occupancy_image_publish" type="occupancy_image_publish_node" />

  <node name="visulizer" pkg="rviz" type="rviz" args="-d $(find activity_layer)/config/sim_activity_layer.vcg"/>
  
</launch>
